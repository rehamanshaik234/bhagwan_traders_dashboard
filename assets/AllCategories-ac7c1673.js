import{r as s,u as S,j as e,C as w,S as B}from"./index-6881a38b.js";import{B as A}from"./Breadcrumb-463c378a.js";import{u as D}from"./useCategory-d265f006.js";import{B as m,T as E}from"./Box-d449a0b0.js";import{A as k}from"./Autocomplete-4a848a23.js";import{T as O}from"./TextField-7f727abd.js";import{B as f}from"./Button-ff562e0b.js";import{T as I}from"./TableContainer-0ad4f5c4.js";import{T as R,a as F,b as h,c as a,d as H}from"./TableRow-d0664d59.js";import{T as L}from"./TablePagination-5840844c.js";import"./index.esm-522351cb.js";import"./Grid-132cce37.js";import"./Link-585f2144.js";import"./Select-d12d8e0d.js";import"./Popover-40bbd40c.js";import"./Modal-04cf2a2a.js";import"./Fade-577ca4d2.js";import"./ownerWindow-71250041.js";import"./createChainedFunction-0bab83cf.js";import"./Portal-343632f1.js";import"./List-9cc45e96.js";import"./utils-a73c94d0.js";import"./useControlled-4f8eaaf0.js";import"./useId-c7e897e5.js";import"./formControlState-a1fb9590.js";import"./useFormControl-d4f0b139.js";import"./Popper-aa3de15e.js";import"./ListSubheader-742fb7a6.js";import"./usePreviousProps-73c1b2c1.js";import"./Chip-800657f9.js";import"./FormControl-8f5e2d3c.js";import"./isMuiElement-4897e4b7.js";import"./KeyboardArrowRight-b6f9714b.js";import"./Toolbar-f3beb080.js";import"./MenuItem-0a5cd614.js";import"./listItemTextClasses-0a907018.js";import"./dividerClasses-f2209139.js";const N=[{to:"/",title:"Home"},{title:"All Categories"}],Te=()=>{const{getAllCategories:x,getCategoryById:b,categories:o,loading:C}=D(),[p,i]=s.useState([]),[c,d]=s.useState({open:!1,message:""}),[y,u]=s.useState(null),T=S(),[g,l]=s.useState(0),[n,P]=s.useState(5);s.useEffect(()=>{x()},[x]),s.useEffect(()=>{i(o)},[o]);const v=async t=>{if(!t){i(o);return}try{const r=await b(t.id);r.status&&r.data?(i([r.data]),l(0)):(i([]),d({open:!0,message:"Category not found."}))}catch{d({open:!0,message:"Error while searching."})}},j=n>0?p.slice(g*n,g*n+n):p;return e.jsxs(m,{children:[e.jsx(A,{title:"All Categories",items:N}),e.jsxs(w,{sx:{mt:2,p:2},children:[e.jsx(E,{variant:"h6",mb:2,children:"Categories List"}),e.jsxs(m,{display:"flex",gap:2,mb:2,flexDirection:{xs:"column",sm:"row"},justifyContent:"space-between",children:[e.jsxs(m,{display:"flex",gap:2,children:[e.jsx(k,{disablePortal:!0,options:o,getOptionLabel:t=>`${t.id} - ${t.name}`,isOptionEqualToValue:(t,r)=>t.id===r.id,value:y,onChange:(t,r)=>{u(r),v(r)},sx:{minWidth:300},renderInput:t=>e.jsx(O,{...t,label:"Search Category",size:"small"})}),e.jsx(f,{variant:"outlined",onClick:()=>{u(null),i(o),l(0)},children:"Clear"})]}),e.jsx(m,{children:e.jsx(f,{variant:"outlined",onClick:()=>{T("/addCategory")},children:"Add Category"})})]}),e.jsx(I,{children:e.jsxs(R,{children:[e.jsx(F,{sx:{backgroundColor:"#f5f5f5"},children:e.jsxs(h,{children:[e.jsx(a,{children:"ID"}),e.jsx(a,{children:"Image"}),e.jsx(a,{children:"Name"}),e.jsx(a,{children:"Description"})]})}),e.jsx(H,{children:j.length>0?j.map(t=>e.jsxs(h,{children:[e.jsx(a,{children:t.id}),e.jsx(a,{children:e.jsx("img",{src:t.image_url,alt:t.name,width:60,height:60,style:{objectFit:"cover",borderRadius:4},onError:r=>r.target.style.display="none"})}),e.jsx(a,{children:t.name}),e.jsx(a,{children:t.description||"-"})]},t.id)):e.jsx(h,{children:e.jsx(a,{colSpan:4,align:"center",children:C?"Loading...":"No categories found."})})})]})}),e.jsx(L,{component:"div",count:p.length,page:g,onPageChange:(t,r)=>l(r),rowsPerPage:n,onRowsPerPageChange:t=>{P(parseInt(t.target.value,10)),l(0)},rowsPerPageOptions:[5,10,25,{label:"All",value:-1}]})]}),e.jsx(B,{open:c.open,autoHideDuration:3e3,onClose:()=>d({...c,open:!1}),message:c.message,anchorOrigin:{vertical:"bottom",horizontal:"right"}})]})};export{Te as default};
