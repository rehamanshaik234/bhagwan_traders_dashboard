import{r as s,j as t,C as A,Y as f}from"./index-6881a38b.js";import{u as R,T as q,a as j,L as y}from"./Legend-680dc9e4.js";import{B as E}from"./Breadcrumb-463c378a.js";import{B as g,T as K}from"./Box-d449a0b0.js";import{T as c}from"./TextField-7f727abd.js";import{M as r}from"./MenuItem-0a5cd614.js";import{T as U,a as b}from"./Tabs-043eae2c.js";import{C as Y}from"./CircularProgress-8429f72f.js";import{R as _,L as M,C as S,X as v,Y as T,T as C,a as Q,B as G,b as H}from"./BarChart-47639d70.js";import{T as X,a as $,b as d,c as l,d as I}from"./TableRow-d0664d59.js";import"./index.esm-522351cb.js";import"./Grid-132cce37.js";import"./Link-585f2144.js";import"./FormControl-8f5e2d3c.js";import"./utils-a73c94d0.js";import"./useFormControl-d4f0b139.js";import"./isMuiElement-4897e4b7.js";import"./useId-c7e897e5.js";import"./formControlState-a1fb9590.js";import"./Select-d12d8e0d.js";import"./Popover-40bbd40c.js";import"./Modal-04cf2a2a.js";import"./Fade-577ca4d2.js";import"./ownerWindow-71250041.js";import"./createChainedFunction-0bab83cf.js";import"./Portal-343632f1.js";import"./List-9cc45e96.js";import"./useControlled-4f8eaaf0.js";import"./listItemTextClasses-0a907018.js";import"./dividerClasses-f2209139.js";import"./KeyboardArrowRight-b6f9714b.js";const V=[{to:"/",title:"Home"},{title:"Users"}],Lt=()=>{const[n,B]=s.useState("chart"),[m,z]=s.useState("line"),[u,L]=s.useState("monthly"),[i,k]=s.useState({brand:"",product:""}),[w,D]=s.useState([]),[F,P]=s.useState([]),{data:o,loading:W,error:h}=R({type:u,metric:"product",filters:i});s.useEffect(()=>{(async()=>{try{const[a,p]=await Promise.all([f.get("/products/getAllBrands"),f.get("/products/getAllProducts?limit=1000")]);a.data.success&&D(a.data.data),p.data.success&&P(p.data.data)}catch(a){console.error("Error loading filters:",a)}})()},[]);const x=e=>{k({...i,[e.target.name]:e.target.value})};return t.jsxs(g,{children:[t.jsx(E,{title:"Users",items:V}),t.jsxs(g,{display:"flex",gap:2,mb:2,flexWrap:"wrap",children:[t.jsxs(c,{select:!0,label:"Type",value:u,onChange:e=>L(e.target.value),size:"small",fullWidth:!0,sx:{flex:1,minWidth:100},children:[t.jsx(r,{value:"daily",children:"Daily"}),t.jsx(r,{value:"monthly",children:"Monthly"}),t.jsx(r,{value:"yearly",children:"Yearly"})]}),t.jsxs(c,{select:!0,name:"brand",label:"Filter by Brand",value:i.brand,onChange:x,size:"small",fullWidth:!0,sx:{flex:1,minWidth:100},children:[t.jsx(r,{value:"",children:"All"}),w.map(e=>t.jsx(r,{value:e.name,children:e.name},e.id))]}),t.jsxs(c,{select:!0,name:"product",label:"Filter by Product",value:i.product,onChange:x,size:"small",fullWidth:!0,sx:{flex:1,minWidth:100},children:[t.jsx(r,{value:"",children:"All"}),F.map(e=>t.jsx(r,{value:e.name,children:e.name},e.id))]}),n==="chart"&&t.jsxs(q,{value:m,exclusive:!0,onChange:(e,a)=>a&&z(a),size:"small",sx:{height:"40px",alignSelf:"center"},children:[t.jsx(j,{value:"line",children:"Line Chart"}),t.jsx(j,{value:"bar",children:"Bar Chart"})]})]}),t.jsxs(U,{value:n,onChange:(e,a)=>B(a),sx:{my:5},children:[t.jsx(b,{label:"Chart",value:"chart"}),t.jsx(b,{label:"Table",value:"table"})]}),W?t.jsx(Y,{}):h?t.jsx(K,{color:"error",children:h}):n==="chart"?t.jsx(_,{width:"100%",height:400,children:m==="line"?t.jsxs(M,{data:o,margin:{top:20,right:40,left:30,bottom:30},children:[t.jsx(S,{strokeDasharray:"3 3"}),t.jsx(v,{dataKey:"label",label:{value:"Date",position:"insideBottom",offset:-1,style:{fontSize:12}},tick:{fontSize:10}}),t.jsx(T,{label:{value:"Units Sold",angle:-90,position:"insideLeft",offset:-10,style:{fontSize:12}},tick:{fontSize:10},tickFormatter:e=>e.toLocaleString()}),t.jsx(C,{formatter:e=>`${e.toLocaleString()} units`,contentStyle:{fontSize:12}}),t.jsx(y,{wrapperStyle:{fontSize:12}}),t.jsx(Q,{type:"monotone",dataKey:"total_quantity",stroke:"#8884d8",name:"Product Quantity",strokeWidth:2})]}):t.jsxs(G,{data:o,margin:{top:20,right:40,left:30,bottom:30},children:[t.jsx(S,{strokeDasharray:"3 3"}),t.jsx(v,{dataKey:"label",label:{value:"Date",position:"insideBottom",offset:-10,style:{fontSize:12}},tick:{fontSize:10}}),t.jsx(T,{label:{value:"Units Sold",angle:-90,position:"insideLeft",style:{fontSize:12}},tick:{fontSize:10},tickFormatter:e=>e.toLocaleString()}),t.jsx(C,{formatter:e=>`${e.toLocaleString()} units`,contentStyle:{fontSize:12}}),t.jsx(y,{wrapperStyle:{fontSize:12}}),t.jsx(H,{dataKey:"total_quantity",fill:"#8884d8",name:"Product Quantity"})]})}):t.jsx(A,{sx:{mt:2},children:t.jsxs(X,{children:[t.jsx($,{children:t.jsxs(d,{children:[t.jsx(l,{children:"Date"}),t.jsx(l,{children:"Quantity"})]})}),t.jsxs(I,{children:[o.map((e,a)=>t.jsxs(d,{children:[t.jsx(l,{children:new Date(e.label).toLocaleDateString()}),t.jsxs(l,{children:[e.total_quantity.toLocaleString()," units"]})]},a)),t.jsxs(d,{sx:{fontWeight:"bold",backgroundColor:"#f3f4f6"},children:[t.jsx(l,{children:"Total"}),t.jsxs(l,{children:[o.reduce((e,a)=>e+a.total_quantity,0).toLocaleString()," units"]})]})]})]})})]})};export{Lt as default};
