import{r as l,j as e,S,Y as y}from"./index-6881a38b.js";import{P as D}from"./PageContainer-7973d9b6.js";import{B as M}from"./Breadcrumb-463c378a.js";import{B as f}from"./BlankCard-8db158a0.js";import{C as d}from"./CustomTextField-48f39568.js";import{C as c}from"./CustomFormLabel-32e7f4d2.js";import{C as U}from"./CustomSelect-32b62755.js";import{G as o}from"./Grid-132cce37.js";import{C as w}from"./CardContent-c9490132.js";import{T as u,B as F}from"./Box-d449a0b0.js";import{M as W}from"./MenuItem-0a5cd614.js";import{S as P}from"./Stack-69599395.js";import{B}from"./Button-ff562e0b.js";import{R as E}from"./index.esm-522351cb.js";import"./CustomSwitch-d7080344.js";import{T as I,a as $}from"./Tabs-043eae2c.js";import{D as k}from"./Divider-2303db12.js";import"./Link-585f2144.js";import"./Card-7d7a88e2.js";import"./TextField-7f727abd.js";import"./FormControl-8f5e2d3c.js";import"./utils-a73c94d0.js";import"./useFormControl-d4f0b139.js";import"./isMuiElement-4897e4b7.js";import"./useId-c7e897e5.js";import"./formControlState-a1fb9590.js";import"./Select-d12d8e0d.js";import"./Popover-40bbd40c.js";import"./Modal-04cf2a2a.js";import"./Fade-577ca4d2.js";import"./ownerWindow-71250041.js";import"./createChainedFunction-0bab83cf.js";import"./Portal-343632f1.js";import"./List-9cc45e96.js";import"./useControlled-4f8eaaf0.js";import"./listItemTextClasses-0a907018.js";import"./dividerClasses-f2209139.js";import"./createStack-ed4bacaf.js";import"./styled-e1075cb7.js";import"./Switch-fca5ef5b.js";import"./SwitchBase-10feba82.js";import"./KeyboardArrowRight-b6f9714b.js";const N=[{value:"admin",label:"Admin"},{value:"manager",label:"Manager"}],z=()=>{const[t,m]=l.useState(null),[a,n]=l.useState({name:"",email:"",role:""}),[s,C]=l.useState({current:"",new:"",confirm:""}),[v,h]=l.useState(""),[b,i]=l.useState("");l.useEffect(()=>{const r=JSON.parse(localStorage.getItem("authUser"));r&&r.id?(m(r.id),n({name:r.name,email:r.email,role:r.role})):i("User not authenticated")},[]);const p=r=>j=>{n(g=>({...g,[r]:j.target.value}))},x=r=>j=>{C(g=>({...g,[r]:j.target.value}))},A=async()=>{try{const r=await y.put(`/user/updateUser/${t}`,a);r.data.success?(h("User updated successfully"),localStorage.setItem("authUser",JSON.stringify({...a,id:t}))):i(r.data.message||"Update failed")}catch{i("Server error while updating")}},T=async()=>{if(s.new!==s.confirm)return i("New password and confirm password must match");try{const r=await y.put(`/user/userChangePassword/${t}`,{currentPassword:s.current,newPassword:s.new});r.data.success?(h("Password changed successfully"),C({current:"",new:"",confirm:""})):i(r.data.message||"Password change failed")}catch{i("Server error while changing password")}};return e.jsxs(o,{container:!0,spacing:3,children:[e.jsx(o,{item:!0,xs:12,lg:6,children:e.jsx(f,{children:e.jsxs(w,{children:[e.jsx(u,{variant:"h5",mb:1,children:"Personal Details"}),e.jsx(u,{color:"textSecondary",mb:3,children:"Edit your personal details"}),e.jsx("form",{children:e.jsxs(o,{container:!0,spacing:2,children:[e.jsxs(o,{item:!0,xs:12,children:[e.jsx(c,{htmlFor:"name",children:"Your Name"}),e.jsx(d,{id:"name",value:a.name,onChange:p("name"),fullWidth:!0})]}),e.jsxs(o,{item:!0,xs:12,children:[e.jsx(c,{htmlFor:"role",children:"Role"}),e.jsx(U,{id:"role",value:a.role,onChange:p("role"),fullWidth:!0,children:N.map(r=>e.jsx(W,{value:r.value,children:r.label},r.value))})]}),e.jsxs(o,{item:!0,xs:12,children:[e.jsx(c,{htmlFor:"email",children:"Email"}),e.jsx(d,{id:"email",value:a.email,onChange:p("email"),fullWidth:!0})]})]})})]})})}),e.jsx(o,{item:!0,xs:12,lg:6,children:e.jsx(f,{children:e.jsxs(w,{children:[e.jsx(u,{variant:"h5",mb:1,children:"Change Password"}),e.jsx(u,{color:"textSecondary",mb:3,children:"Change your password"}),e.jsxs("form",{children:[e.jsx(c,{htmlFor:"current",children:"Current Password"}),e.jsx(d,{id:"current",type:"password",value:s.current,onChange:x("current"),fullWidth:!0}),e.jsx(c,{htmlFor:"new",children:"New Password"}),e.jsx(d,{id:"new",type:"password",value:s.new,onChange:x("new"),fullWidth:!0}),e.jsx(c,{htmlFor:"confirm",children:"Confirm Password"}),e.jsx(d,{id:"confirm",type:"password",value:s.confirm,onChange:x("confirm"),fullWidth:!0}),e.jsx(P,{mt:2,children:e.jsx(B,{variant:"outlined",color:"primary",onClick:T,children:"Save Password"})})]})]})})}),e.jsx(o,{item:!0,xs:12,children:e.jsx(P,{direction:"row",spacing:2,justifyContent:"end",mt:3,children:e.jsx(B,{size:"large",variant:"contained",color:"primary",onClick:A,children:"Save"})})}),e.jsx(S,{open:!!v,autoHideDuration:3e3,onClose:()=>h(""),message:v,anchorOrigin:{vertical:"bottom",horizontal:"right"}}),e.jsx(S,{open:!!b,autoHideDuration:3e3,onClose:()=>i(""),message:b,anchorOrigin:{vertical:"bottom",horizontal:"right"}})]})},O=[{to:"/",title:"Home"},{title:"Account Setting"}];function R(t){const{children:m,value:a,index:n,...s}=t;return e.jsx("div",{role:"tabpanel",hidden:a!==n,id:`simple-tabpanel-${n}`,"aria-labelledby":`simple-tab-${n}`,...s,children:a===n&&e.jsx(F,{children:m})})}function H(t){return{id:`simple-tab-${t}`,"aria-controls":`simple-tabpanel-${t}`}}const Me=()=>{const[t,m]=l.useState(0),a=(n,s)=>{m(s)};return e.jsxs(D,{title:"Account Setting",description:"this is Account Setting page",children:[e.jsx(M,{title:"Account Setting",items:O}),e.jsx(o,{container:!0,spacing:3,children:e.jsx(o,{item:!0,xs:12,children:e.jsxs(f,{children:[e.jsx(F,{sx:{maxWidth:{xs:320,sm:480}},children:e.jsx(I,{value:t,onChange:a,scrollButtons:"auto","aria-label":"basic tabs example",variant:"scrollable",children:e.jsx($,{iconPosition:"start",icon:e.jsx(E,{size:"22"}),label:"Account",...H(0)})})}),e.jsx(k,{}),e.jsx(w,{children:e.jsx(R,{value:t,index:0,children:e.jsx(z,{})})})]})})})]})};export{Me as default};
