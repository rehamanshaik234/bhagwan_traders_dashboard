import{u as z,r as s,j as e,C as E}from"./index-6881a38b.js";import{B as N}from"./Breadcrumb-463c378a.js";import{u as R}from"./useSubCategory-fb623db8.js";import{u as H}from"./useCategory-d265f006.js";import{B as n}from"./Box-d449a0b0.js";import{T as j}from"./TextField-7f727abd.js";import{M as c}from"./MenuItem-0a5cd614.js";import{B as C}from"./Button-ff562e0b.js";import{T as L}from"./TableContainer-0ad4f5c4.js";import{T as M,a as O,b as d,c as r,d as P}from"./TableRow-d0664d59.js";import{C as $}from"./CircularProgress-8429f72f.js";import{A as q}from"./Avatar-963f1f93.js";import"./index.esm-522351cb.js";import"./Grid-132cce37.js";import"./Link-585f2144.js";import"./FormControl-8f5e2d3c.js";import"./utils-a73c94d0.js";import"./useFormControl-d4f0b139.js";import"./isMuiElement-4897e4b7.js";import"./useId-c7e897e5.js";import"./formControlState-a1fb9590.js";import"./Select-d12d8e0d.js";import"./Popover-40bbd40c.js";import"./Modal-04cf2a2a.js";import"./Fade-577ca4d2.js";import"./ownerWindow-71250041.js";import"./createChainedFunction-0bab83cf.js";import"./Portal-343632f1.js";import"./List-9cc45e96.js";import"./useControlled-4f8eaaf0.js";import"./listItemTextClasses-0a907018.js";import"./dividerClasses-f2209139.js";const G=[{to:"/",title:"Home"},{title:"All Sub Categories"}],Ae=()=>{const{getAllSubCategories:f,getSubCategoryById:y,getSubCategoryByCategoryId:S}=R(),{getAllCategories:b}=H(),v=z(),[g,l]=s.useState([]),[A,w]=s.useState([]),[B,T]=s.useState([]),[I,m]=s.useState(""),[F,p]=s.useState(""),[W,i]=s.useState(!1),o=async()=>{i(!0);const t=await f();t!=null&&t.status&&(l(t.data),w(t.data)),i(!1)},D=async t=>{if(m(t),p(""),i(!0),t){const a=await S(t);a!=null&&a.status&&l(a.data)}else await o();i(!1)},_=async t=>{if(m(""),p(t),!t)return await o();i(!0);const a=await y(t);a!=null&&a.status&&a.data?l([a.data]):l([]),i(!1)},k=()=>{m(""),p(""),o()};return s.useEffect(()=>{(async()=>{const a=await b();a!=null&&a.status&&T(a.data),await o()})()},[]),e.jsxs(e.Fragment,{children:[e.jsx(N,{title:"All Sub Categories",items:G}),e.jsxs(n,{sx:{p:2},children:[e.jsxs(n,{sx:{mb:3,display:"flex",gap:2,alignItems:"center",flexWrap:"wrap",justifyContent:"space-between"},children:[e.jsxs(n,{sx:{mb:3,display:"flex",gap:2,alignItems:"center",flexWrap:"wrap"},children:[e.jsxs(j,{label:"Filter by Category",select:!0,size:"small",value:I,onChange:t=>D(t.target.value),sx:{minWidth:220},children:[e.jsx(c,{value:"",children:"All Categories"}),B.map(t=>e.jsx(c,{value:t.id,children:t.name},t.id))]}),e.jsxs(j,{label:"Filter by Sub Category",select:!0,size:"small",value:F,onChange:t=>_(t.target.value),sx:{minWidth:240},children:[e.jsx(c,{value:"",children:"All Sub Categories"}),A.map(t=>e.jsxs(c,{value:t.id,children:[t.id," - ",t.name]},t.id))]}),e.jsx(C,{variant:"outlined",onClick:k,children:"Reset"})]}),e.jsx(n,{children:e.jsx(C,{variant:"outlined",onClick:()=>{v("/addSubCategory")},children:"Add Sub Category"})})]}),e.jsx(E,{elevation:3,children:e.jsx(L,{children:e.jsxs(M,{children:[e.jsx(O,{sx:{backgroundColor:"#f5f5f5"},children:e.jsxs(d,{children:[e.jsx(r,{children:"#"}),e.jsx(r,{children:"Image"}),e.jsx(r,{children:"Name"}),e.jsx(r,{children:"Description"}),e.jsx(r,{children:"Category"}),e.jsx(r,{children:"Created At"})]})}),e.jsx(P,{children:W?e.jsx(d,{children:e.jsx(r,{colSpan:6,align:"center",children:e.jsx($,{size:24})})}):g.length===0?e.jsx(d,{children:e.jsx(r,{colSpan:6,align:"center",children:"No subcategories found."})}):g.map((t,a)=>{var u,x,h;return e.jsxs(d,{children:[e.jsx(r,{children:a+1}),e.jsx(r,{children:e.jsx(q,{src:(u=t.image_url)!=null&&u.startsWith("http")?t.image_url:`https://materialmart.shop${(x=t.image_url)==null?void 0:x.replace("D:","")}`,alt:t.name,variant:"rounded"})}),e.jsx(r,{children:t.name}),e.jsx(r,{children:t.description}),e.jsx(r,{children:((h=t.category)==null?void 0:h.name)||"-"}),e.jsx(r,{children:new Date(t.created_at).toLocaleDateString()})]},t.id)})})]})})})]})]})};export{Ae as default};
