import{r as s,j as e,C as A,Y as f}from"./index-6881a38b.js";import{u as P,T as E,a as j,L as g}from"./Legend-680dc9e4.js";import{B as K}from"./Breadcrumb-463c378a.js";import{B as b,T as Y}from"./Box-d449a0b0.js";import{T as c}from"./TextField-7f727abd.js";import{M as r}from"./MenuItem-0a5cd614.js";import{T as _,a as y}from"./Tabs-043eae2c.js";import{C as $}from"./CircularProgress-8429f72f.js";import{R as M,L as G,C as S,X as v,Y as T,T as C,a as H,B as U,b as X}from"./BarChart-47639d70.js";import{T as I,a as V,b as d,c as l,d as q}from"./TableRow-d0664d59.js";import"./index.esm-522351cb.js";import"./Grid-132cce37.js";import"./Link-585f2144.js";import"./FormControl-8f5e2d3c.js";import"./utils-a73c94d0.js";import"./useFormControl-d4f0b139.js";import"./isMuiElement-4897e4b7.js";import"./useId-c7e897e5.js";import"./formControlState-a1fb9590.js";import"./Select-d12d8e0d.js";import"./Popover-40bbd40c.js";import"./Modal-04cf2a2a.js";import"./Fade-577ca4d2.js";import"./ownerWindow-71250041.js";import"./createChainedFunction-0bab83cf.js";import"./Portal-343632f1.js";import"./List-9cc45e96.js";import"./useControlled-4f8eaaf0.js";import"./listItemTextClasses-0a907018.js";import"./dividerClasses-f2209139.js";import"./KeyboardArrowRight-b6f9714b.js";const J=[{to:"/",title:"Home"},{title:"Users"}],Le=()=>{const[n,B]=s.useState("chart"),[m,z]=s.useState("line"),[u,L]=s.useState("monthly"),[o,k]=s.useState({brand:"",product:""}),[R,w]=s.useState([]),[D,F]=s.useState([]),{data:i,loading:W,error:h}=P({type:u,metric:"amount",filters:o});s.useEffect(()=>{(async()=>{try{const[a,p]=await Promise.all([f.get("/products/getAllBrands"),f.get("/products/getAllProducts?limit=1000")]);a.data.success&&w(a.data.data),p.data.success&&F(p.data.data)}catch(a){console.error("Error loading filters:",a)}})()},[]);const x=t=>{k({...o,[t.target.name]:t.target.value})};return e.jsxs(b,{children:[e.jsx(K,{title:"Users",items:J}),e.jsxs(b,{display:"flex",gap:2,mb:2,flexWrap:"wrap",children:[e.jsxs(c,{select:!0,label:"Type",value:u,onChange:t=>L(t.target.value),size:"small",fullWidth:!0,sx:{flex:1,minWidth:100},children:[e.jsx(r,{value:"daily",children:"Daily"}),e.jsx(r,{value:"monthly",children:"Monthly"}),e.jsx(r,{value:"yearly",children:"Yearly"})]}),e.jsxs(c,{select:!0,name:"brand",label:"Filter by Brand",value:o.brand,onChange:x,size:"small",fullWidth:!0,sx:{flex:1,minWidth:100},children:[e.jsx(r,{value:"",children:"All"}),R.map(t=>e.jsx(r,{value:t.name,children:t.name},t.id))]}),e.jsxs(c,{select:!0,name:"product",label:"Filter by Product",value:o.product,onChange:x,size:"small",fullWidth:!0,sx:{flex:1,minWidth:100},children:[e.jsx(r,{value:"",children:"All"}),D.map(t=>e.jsx(r,{value:t.name,children:t.name},t.id))]}),n==="chart"&&e.jsxs(E,{value:m,exclusive:!0,onChange:(t,a)=>a&&z(a),size:"small",sx:{height:"40px",alignSelf:"center"},children:[e.jsx(j,{value:"line",children:"Line Chart"}),e.jsx(j,{value:"bar",children:"Bar Chart"})]})]}),e.jsxs(_,{value:n,onChange:(t,a)=>B(a),sx:{my:5},children:[e.jsx(y,{label:"Chart",value:"chart"}),e.jsx(y,{label:"Table",value:"table"})]}),W?e.jsx($,{}):h?e.jsx(Y,{color:"error",children:h}):n==="chart"?e.jsx(M,{width:"100%",height:400,children:m==="line"?e.jsxs(G,{data:i,margin:{top:20,right:40,left:30,bottom:30},children:[e.jsx(S,{strokeDasharray:"3 3"}),e.jsx(v,{dataKey:"label",label:{value:"Date",position:"insideBottom",offset:-1,style:{fontSize:12}},tick:{fontSize:10}}),e.jsx(T,{label:{value:"Revenue (₹)",angle:-90,position:"insideLeft",offset:-10,style:{fontSize:12}},tick:{fontSize:10},tickFormatter:t=>`₹${t.toLocaleString()}`}),e.jsx(C,{formatter:t=>`₹${t.toLocaleString()}`,contentStyle:{fontSize:12}}),e.jsx(g,{wrapperStyle:{fontSize:12}}),e.jsx(H,{type:"monotone",dataKey:"total_amount",stroke:"#0f766e",name:"Total Revenue",strokeWidth:2})]}):e.jsxs(U,{data:i,margin:{top:20,right:40,left:20,bottom:30},children:[e.jsx(S,{strokeDasharray:"3 3"}),e.jsx(v,{dataKey:"label",label:{value:"Date",position:"insideBottom",offset:-10,style:{fontSize:12}},tick:{fontSize:10}}),e.jsx(T,{label:{value:"Revenue (₹)",angle:-90,position:"insideLeft",style:{fontSize:12}},tick:{fontSize:10},tickFormatter:t=>`₹${t.toLocaleString()}`}),e.jsx(C,{formatter:t=>`₹${t.toLocaleString()}`,contentStyle:{fontSize:12}}),e.jsx(g,{wrapperStyle:{fontSize:12}}),e.jsx(X,{dataKey:"total_amount",fill:"#0f766e",name:"Total Revenue"})]})}):e.jsx(A,{sx:{mt:2},children:e.jsxs(I,{children:[e.jsx(V,{children:e.jsxs(d,{children:[e.jsx(l,{children:"Date"}),e.jsx(l,{children:"Total Amount"})]})}),e.jsxs(q,{children:[i.map((t,a)=>e.jsxs(d,{children:[e.jsx(l,{children:new Date(t.label).toLocaleDateString()}),e.jsxs(l,{children:["₹",t.total_amount.toLocaleString()]})]},a)),e.jsxs(d,{sx:{fontWeight:"bold",backgroundColor:"#f9fafb"},children:[e.jsx(l,{children:"Total"}),e.jsxs(l,{children:["₹",i.reduce((t,a)=>t+a.total_amount,0).toLocaleString()]})]})]})]})})]})};export{Le as default};
