import{r as b,v as B,j as e,C as N,I as d}from"./index-6881a38b.js";import{B as _}from"./Breadcrumb-463c378a.js";import{u as E}from"./useCustomers-b5b9a06f.js";import{d as C,a as g,b as T,c as F}from"./LastPage-50f3a6a1.js";import{B as j}from"./Box-d449a0b0.js";import{T as O}from"./TextField-7f727abd.js";import{B as w}from"./Button-ff562e0b.js";import{C as A}from"./CircularProgress-8429f72f.js";import{T as I,a as M,b as p,c as l,d as P}from"./TableRow-d0664d59.js";import{T as R}from"./TableFooter-169d4b91.js";import{T as S}from"./TablePagination-5840844c.js";import"./index.esm-522351cb.js";import"./Grid-132cce37.js";import"./Link-585f2144.js";import"./createSvgIcon-e0680651.js";import"./createChainedFunction-0bab83cf.js";import"./ownerWindow-71250041.js";import"./isMuiElement-4897e4b7.js";import"./useId-c7e897e5.js";import"./useControlled-4f8eaaf0.js";import"./FormControl-8f5e2d3c.js";import"./utils-a73c94d0.js";import"./useFormControl-d4f0b139.js";import"./formControlState-a1fb9590.js";import"./Select-d12d8e0d.js";import"./Popover-40bbd40c.js";import"./Modal-04cf2a2a.js";import"./Fade-577ca4d2.js";import"./Portal-343632f1.js";import"./List-9cc45e96.js";import"./KeyboardArrowRight-b6f9714b.js";import"./Toolbar-f3beb080.js";import"./MenuItem-0a5cd614.js";import"./listItemTextClasses-0a907018.js";import"./dividerClasses-f2209139.js";const L=[{to:"/",title:"Home"},{title:"New Customers"}],be=()=>{const{newCustomers:f,pagination:o,loadingNew:x,fetchNewCustomers:n}=E(),h={name:"",email:"",number:"",from:"",to:""},[m,u]=b.useState(h),c=B();b.useEffect(()=>{n({page:1,limit:o.limit})},[]);const v=()=>{const t=Object.fromEntries(Object.entries(m).filter(([i,r])=>r!==""));n({...t,page:1,limit:o.limit})};return e.jsxs(e.Fragment,{children:[e.jsx(_,{title:"New Customers",items:L}),e.jsxs(N,{variant:"outlined",sx:{p:2,mt:2},children:[e.jsxs(j,{display:"flex",gap:2,flexWrap:"wrap",mb:2,children:[["name","email","number","from","to"].map(t=>e.jsx(O,{label:t==="from"||t==="to"?t==="from"?"From":"To":t.charAt(0).toUpperCase()+t.slice(1),size:"small",type:t==="from"||t==="to"?"date":"text",value:m[t],onChange:i=>u(r=>({...r,[t]:i.target.value})),InputLabelProps:t==="from"||t==="to"?{shrink:!0}:void 0},t)),e.jsx(w,{variant:"contained",disabled:x,onClick:v,children:x?e.jsx(A,{size:20}):"Apply Filter"}),e.jsx(j,{display:"flex",justifyContent:"flex-end",mb:1,children:e.jsx(w,{variant:"outlined",onClick:()=>{u(h),n({page:1,limit:o.limit})},children:"Reset"})})]}),e.jsxs(I,{children:[e.jsx(M,{children:e.jsxs(p,{sx:{backgroundColor:"#f5f5f5"},children:[e.jsx(l,{children:"ID"}),e.jsx(l,{children:"Name"}),e.jsx(l,{children:"Email"}),e.jsx(l,{children:"Number"}),e.jsx(l,{children:"Created At"})]})}),e.jsxs(P,{children:[f.map(t=>e.jsxs(p,{children:[e.jsx(l,{children:t.id}),e.jsx(l,{children:t.name}),e.jsx(l,{children:t.email}),e.jsx(l,{children:t.number}),e.jsx(l,{children:new Date(t.created_at).toLocaleString()})]},t.id)),f.length===0&&e.jsx(p,{children:e.jsx(l,{colSpan:5,align:"center",children:x?"Loading...":"No customers found"})})]}),e.jsx(R,{children:e.jsx(p,{children:e.jsx(S,{count:o.total,page:o.page-1,rowsPerPage:o.limit,rowsPerPageOptions:[5,10,25,{label:"All",value:-1}],onPageChange:(t,i)=>{const r=Object.fromEntries(Object.entries(m).filter(([a,s])=>s!==""));n({...r,page:i+1,limit:o.limit})},onRowsPerPageChange:t=>{const i=parseInt(t.target.value,10),r=Object.fromEntries(Object.entries(m).filter(([a,s])=>s!==""));n({...r,page:1,limit:i})},ActionsComponent:({count:t,page:i,rowsPerPage:r,onPageChange:a})=>e.jsxs(j,{sx:{flexShrink:0,ml:2.5},children:[e.jsx(d,{onClick:s=>a(s,0),disabled:i===0,children:c.direction==="rtl"?e.jsx(C,{}):e.jsx(g,{})}),e.jsx(d,{onClick:s=>a(s,i-1),disabled:i===0,children:c.direction==="rtl"?e.jsx(T,{}):e.jsx(F,{})}),e.jsx(d,{onClick:s=>a(s,i+1),disabled:i>=Math.ceil(t/r)-1,children:c.direction==="rtl"?e.jsx(F,{}):e.jsx(T,{})}),e.jsx(d,{onClick:s=>a(s,Math.max(0,Math.ceil(t/r)-1)),disabled:i>=Math.ceil(t/r)-1,children:c.direction==="rtl"?e.jsx(g,{}):e.jsx(C,{})})]})})})})]})]})]})};export{be as default};
